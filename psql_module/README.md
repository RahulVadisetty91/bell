# AWS PostgreSQL Module

This Terraform module provides a template for provisioning a PostgreSQL Relational Database Server (RDS) on AWS.

## How to use

Here we will go over what you will need to do in order to bring in and correctly utilize this module to produce the pSQL databases you require.

### How to bring in

In order to utilize this module in your terraform scripts, you must pull in this folder as a module in your script:

```terraform
module "psql_mod" {
    source = "path/to/psql_module/folder"
}
```

The above code snippet should be included in your script (preferably at the top for organization) with the correct path to this folder in the source variable. This tells terraform to go to that location and get the module from there and run it.

### How to run

Once you have pulled in the module to your script, Terraform will begin trying to run this module along with your scripts on your next run.

This module **requires** four input values in order to run correctly.

1. psql_names
2. vpc_id
3. database_username
4. database_password

`psql_names` is a list of the names you wish to apply to the pSQL database instances this module will be creating.
`vpc_id` is the identifier of the VPC in which to create the target group.
`database_username` and `database_password` are the username/password required to access the database.

Example values:

```
psql_names = [ "DB1", "DB2" ]
vpc_id = "vpc-ce75a1b7"
database_username = "USER"
database_password = "*****"
```

Once you have your values determined, you will need to feed them into your import of the module like this:

```terraform
module "psql_mod" {
    source = "path/to/psql_module/folder"

    psql_names = [ "DB1", "DB2" ]
    vpc_id = "vpc-ce75a1b7"
    database_username = "USER"
    database_password = "*****"
}
```

This will correctly pass in those values to the module and allow it to run correctly. You could also make variables in your script that contain those values and change the call to something like this:

```terraform
module "psql_mod" {
    source = "path/to/psql_module/folder"

    psql_names = "${var.names}"
    vpc_id = "${var.vpc_id}"
    database_username = "USER"
    database_password = "*****"
}
```

### Outputs from module

After you import this module, you will also be able to reference some of its values inside of your own script.

<!-- Values currently available:

* `id` - The database instance ID
* `database_security_group_id` - Security group ID of the database
* `hostname` - Public DNS name of database instance
* `port` - Port of database instance
* `endpoint` - Public DNS name and port separated by a ":"
* `hosted_zone_id` - The zone id for the autogenerated DNS name given in `endpoint`. Use this when creating a short-name DNS [alias](https://www.terraform.io/docs/providers/aws/r/route53_record.html#alias-record) for the `endpoint`.
 -->